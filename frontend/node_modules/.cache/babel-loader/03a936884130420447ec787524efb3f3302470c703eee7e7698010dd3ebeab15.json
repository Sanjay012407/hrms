{"ast":null,"code":"import _objectSpread from\"/root/hrms/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{useCertificates}from\"../context/CertificateContext\";import{useProfiles}from\"../context/ProfileContext\";import{getCertificatesForJobRole,getAllJobRoles,allCertificates}from\"../data/certificateJobRoleMapping\";import SearchableDropdown from\"../components/SearchableDropdown\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function CreateCertificate(){const navigate=useNavigate();const{addCertificate}=useCertificates();const{profiles}=useProfiles();const[form,setForm]=useState({profile:\"\",certificateName:\"\",account:\"\",description:\"\",issueDate:\"2025-09-06\",expiryDate:\"2026-09-07\",approvalStatus:\"Approved\",isInterim:\"False\",fileRequired:\"True\",timeLoggedDays:\"\",timeLoggedHours:\"\",timeLoggedMinutes:\"\",supplier:\"\",totalCost:\"\",certificateFile:null});const[availableCertificates,setAvailableCertificates]=useState({mandatory:[],optional:[]});const[selectedProfile,setSelectedProfile]=useState(null);const[suppliers,setSuppliers]=useState([]);// Load suppliers on component mount\nuseEffect(()=>{fetchSuppliers();},[]);const getApiUrl=()=>{var _process$env$REACT_AP;// In development, use localhost URL\nif(process.env.NODE_ENV==='development'&&process.env.REACT_APP_API_URL){return process.env.REACT_APP_API_URL;}// In production or when API_BASE_URL is relative, use relative path\nif((_process$env$REACT_AP=process.env.REACT_APP_API_BASE_URL)!==null&&_process$env$REACT_AP!==void 0&&_process$env$REACT_AP.startsWith('/')){return'';}// Fallback to localhost for development\nreturn process.env.REACT_APP_API_URL||'http://localhost:5003';};const fetchSuppliers=async()=>{try{const baseUrl=getApiUrl();const response=await fetch(\"\".concat(baseUrl,\"/api/suppliers\"));if(response.ok){const data=await response.json();setSuppliers(data);console.log('Suppliers loaded:',data);}else{console.error('Failed to fetch suppliers:',response.status,response.statusText);}}catch(error){console.error('Error fetching suppliers:',error);}};const handleSupplierSearch=async searchTerm=>{try{const baseUrl=getApiUrl();const response=await fetch(\"\".concat(baseUrl,\"/api/suppliers/search?q=\").concat(encodeURIComponent(searchTerm)));if(response.ok){const data=await response.json();setSuppliers(data);}else{console.error('Failed to search suppliers:',response.status,response.statusText);}}catch(error){console.error('Error searching suppliers:',error);}};const handleAddSupplier=async supplierName=>{try{const baseUrl=getApiUrl();const response=await fetch(\"\".concat(baseUrl,\"/api/suppliers\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:supplierName})});if(response.ok){const newSupplier=await response.json();console.log('New supplier added:',newSupplier);// Update suppliers list\nfetchSuppliers();// Update form\nsetForm(prev=>_objectSpread(_objectSpread({},prev),{},{supplier:supplierName}));}else{console.error('Failed to add supplier:',response.status,response.statusText);}}catch(error){console.error('Error adding supplier:',error);}};const handleChange=e=>{const{name,value}=e.target;setForm(_objectSpread(_objectSpread({},form),{},{[name]:value}));// Handle profile selection change\nif(name==='profile'){const profile=profiles.find(p=>\"\".concat(p.firstName,\" \").concat(p.lastName)===value);setSelectedProfile(profile);if(profile&&profile.jobTitle){const certificates=getCertificatesForJobRole(profile.jobTitle);setAvailableCertificates(certificates);}else{setAvailableCertificates({mandatory:[],optional:[]});}// Reset certificate selection when profile changes\nsetForm(prev=>_objectSpread(_objectSpread({},prev),{},{certificateName:\"\"}));}};const handleFileChange=e=>{const file=e.target.files[0];if(file&&file.type==='application/pdf'){setForm(_objectSpread(_objectSpread({},form),{},{certificateFile:file}));}else{alert('Please select a PDF file only.');e.target.value='';}};const handleSubmit=e=>{e.preventDefault();// Validate required fields\nif(!form.profile){alert('Please select a profile');return;}if(!form.certificateName){alert('Please select or enter a certificate name');return;}// Transform form data to match certificate structure\nconst selectedCert=[...availableCertificates.mandatory,...availableCertificates.optional].find(cert=>cert.code===form.certificateName);const newCertificate={// Required fields for backend validation\ncertificate:selectedCert?\"\".concat(selectedCert.code,\" - \").concat(selectedCert.description):form.certificateName||\"New Certificate\",category:selectedCert?selectedCert.category:\"Other\",// Other fields\ndescription:form.description||\"\",account:form.account||\"\",issueDate:new Date(form.issueDate).toLocaleDateString('en-GB'),expiryDate:new Date(form.expiryDate).toLocaleDateString('en-GB'),profileName:form.profile||\"Unknown Profile\",provider:form.supplier||\"SKILLS PROVIDER\",fileRequired:form.fileRequired===\"True\"?\"Yes\":\"No\",status:form.approvalStatus||\"Approved\",cost:form.totalCost||\"0.00\",jobRole:selectedProfile?selectedProfile.jobTitle:\"Unknown\",approvalStatus:form.approvalStatus||\"Approved\",isInterim:form.isInterim||\"False\",timeLogged:{days:form.timeLoggedDays||\"0\",hours:form.timeLoggedHours||\"0\",minutes:form.timeLoggedMinutes||\"0\"},supplier:form.supplier||\"\",totalCost:form.totalCost||\"0.00\",certificateFile:form.certificateFile?form.certificateFile.name:null,fileData:form.certificateFile};// Add certificate to context\naddCertificate(newCertificate);// Navigate to certificates page\nnavigate(\"/reporting/certificates\");};const handleCancel=()=>{navigate(-1);// go back one page\n// OR navigate(\"/certificates\"); // redirect to certificate list\n};return/*#__PURE__*/_jsx(\"div\",{className:\"flex\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-semibold mb-6\",children:\"Create Certificate\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full max-w-6xl mx-auto bg-white shadow-md rounded-2xl p-6\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-5\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block font-medium mb-1\",children:[\"Profile \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"select\",{name:\"profile\",value:form.profile,onChange:handleChange,className:\"w-full border rounded-lg p-2\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a profile...\"}),profiles.map(profile=>/*#__PURE__*/_jsxs(\"option\",{value:\"\".concat(profile.firstName,\" \").concat(profile.lastName),children:[profile.firstName,\" \",profile.lastName,\" - \",profile.jobTitle]},profile._id))]}),selectedProfile&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:[\"Job Role: \",/*#__PURE__*/_jsx(\"strong\",{children:selectedProfile.jobTitle})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block font-medium mb-1\",children:[\"Certificate Name \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),availableCertificates.mandatory.length>0||availableCertificates.optional.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"select\",{name:\"certificateName\",value:form.certificateName,onChange:handleChange,className:\"w-full border rounded-lg p-2\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a certificate...\"}),availableCertificates.mandatory.length>0&&/*#__PURE__*/_jsx(\"optgroup\",{label:\"Mandatory Certificates\",children:availableCertificates.mandatory.map(cert=>/*#__PURE__*/_jsxs(\"option\",{value:cert.code,children:[cert.code,\" - \",cert.description,\" (\",cert.category,\")\"]},cert.code))}),availableCertificates.optional.length>0&&/*#__PURE__*/_jsx(\"optgroup\",{label:\"Optional Certificates\",children:availableCertificates.optional.map(cert=>/*#__PURE__*/_jsxs(\"option\",{value:cert.code,children:[cert.code,\" - \",cert.description]},cert.code))})]}),(availableCertificates.mandatory.length>0||availableCertificates.optional.length>0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-gray-700 mb-2\",children:[\"Available Certificates for \",selectedProfile===null||selectedProfile===void 0?void 0:selectedProfile.jobTitle,\":\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-red-600\",children:[\"Mandatory (\",availableCertificates.mandatory.length,\"):\"]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside text-gray-600\",children:[availableCertificates.mandatory.slice(0,3).map(cert=>/*#__PURE__*/_jsxs(\"li\",{children:[cert.code,\" - \",cert.category]},cert.code)),availableCertificates.mandatory.length>3&&/*#__PURE__*/_jsxs(\"li\",{children:[\"... and \",availableCertificates.mandatory.length-3,\" more\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-blue-600\",children:[\"Optional (\",availableCertificates.optional.length,\"):\"]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside text-gray-600\",children:[availableCertificates.optional.slice(0,3).map(cert=>/*#__PURE__*/_jsx(\"li\",{children:cert.code},cert.code)),availableCertificates.optional.length>3&&/*#__PURE__*/_jsxs(\"li\",{children:[\"... and \",availableCertificates.optional.length-3,\" more\"]})]})]})]})]})]}):/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"certificateName\",placeholder:form.profile?\"No certificates mapped for this job role. Enter manually.\":\"Please select a profile first\",value:form.certificateName,onChange:handleChange,className:\"w-full border rounded-lg p-2\",disabled:!form.profile})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-1\",children:\"Account\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"account\",placeholder:\"Please select a profile above to proceed\",value:form.account,onChange:handleChange,className:\"w-full border rounded-lg p-2\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-1\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",placeholder:\"Description (optional)\",value:form.description,onChange:handleChange,className:\"w-full border rounded-lg p-2\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-1\",children:\"Issue Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"issueDate\",value:form.issueDate,onChange:handleChange,className:\"w-full border rounded-lg p-2\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-1\",children:\"Expiry Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"expiryDate\",value:form.expiryDate,onChange:handleChange,className:\"w-full border rounded-lg p-2\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-1\",children:\"Approval Status\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"approvalStatus\",value:form.approvalStatus,onChange:handleChange,className:\"w-full border rounded-lg p-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Approved\",children:\"Approved\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Rejected\",children:\"Rejected\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-1\",children:\"Is Interim\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"isInterim\",value:form.isInterim,onChange:handleChange,className:\"w-full border rounded-lg p-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"True\",children:\"True\"}),/*#__PURE__*/_jsx(\"option\",{value:\"False\",children:\"False\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-1\",children:\"File Required\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"fileRequired\",value:form.fileRequired,onChange:handleChange,className:\"w-full border rounded-lg p-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"True\",children:\"True\"}),/*#__PURE__*/_jsx(\"option\",{value:\"False\",children:\"False\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-1\",children:\"Time Logged\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"timeLoggedDays\",placeholder:\"Days\",value:form.timeLoggedDays,onChange:handleChange,className:\"border rounded-lg p-2\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"timeLoggedHours\",placeholder:\"Hours\",value:form.timeLoggedHours,onChange:handleChange,className:\"border rounded-lg p-2\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"timeLoggedMinutes\",placeholder:\"Minutes\",value:form.timeLoggedMinutes,onChange:handleChange,className:\"border rounded-lg p-2\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-1\",children:\"(A day is considered 8 hours)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-1\",children:\"Supplier\"}),/*#__PURE__*/_jsx(SearchableDropdown,{name:\"supplier\",value:form.supplier,onChange:handleChange,options:suppliers,placeholder:\"Type to search suppliers or add new...\",onSearch:handleSupplierSearch,onAddNew:handleAddSupplier,className:\"w-full\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"You can type to search existing suppliers or add a new one\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-1\",children:\"Total Cost\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"totalCost\",placeholder:\"Enter total cost of the certificate\",value:form.totalCost,onChange:handleChange,className:\"w-full border rounded-lg p-2\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-1\",children:\"Upload Certificate PDF\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".pdf\",onChange:handleFileChange,className:\"w-full border rounded-lg p-2\"}),form.certificateFile&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-green-600 mt-1\",children:[\"Selected: \",form.certificateFile.name]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Please upload the certificate in PDF format only\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCancel,className:\"border px-4 py-2 rounded text-gray-600 hover:bg-gray-100\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\",children:\"Save changes\"})]})]})})]})});}","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useCertificates","useProfiles","getCertificatesForJobRole","getAllJobRoles","allCertificates","SearchableDropdown","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CreateCertificate","navigate","addCertificate","profiles","form","setForm","profile","certificateName","account","description","issueDate","expiryDate","approvalStatus","isInterim","fileRequired","timeLoggedDays","timeLoggedHours","timeLoggedMinutes","supplier","totalCost","certificateFile","availableCertificates","setAvailableCertificates","mandatory","optional","selectedProfile","setSelectedProfile","suppliers","setSuppliers","fetchSuppliers","getApiUrl","_process$env$REACT_AP","process","env","NODE_ENV","REACT_APP_API_URL","REACT_APP_API_BASE_URL","startsWith","baseUrl","response","fetch","concat","ok","data","json","console","log","error","status","statusText","handleSupplierSearch","searchTerm","encodeURIComponent","handleAddSupplier","supplierName","method","headers","body","JSON","stringify","name","newSupplier","prev","_objectSpread","handleChange","e","value","target","find","p","firstName","lastName","jobTitle","certificates","handleFileChange","file","files","type","alert","handleSubmit","preventDefault","selectedCert","cert","code","newCertificate","certificate","category","Date","toLocaleDateString","profileName","provider","cost","jobRole","timeLogged","days","hours","minutes","fileData","handleCancel","className","children","onSubmit","onChange","required","map","_id","length","label","slice","placeholder","disabled","options","onSearch","onAddNew","accept","onClick"],"sources":["/root/hrms/frontend/src/pages/CreateCertificate.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useCertificates } from \"../context/CertificateContext\";\nimport { useProfiles } from \"../context/ProfileContext\";\nimport { getCertificatesForJobRole, getAllJobRoles, allCertificates } from \"../data/certificateJobRoleMapping\";\nimport SearchableDropdown from \"../components/SearchableDropdown\";\n\nexport default function CreateCertificate() {\n  const navigate = useNavigate();\n  const { addCertificate } = useCertificates();\n  const { profiles } = useProfiles();\n\n  const [form, setForm] = useState({\n    profile: \"\",\n    certificateName: \"\",\n    account: \"\",\n    description: \"\",\n    issueDate: \"2025-09-06\",\n    expiryDate: \"2026-09-07\",\n    approvalStatus: \"Approved\",\n    isInterim: \"False\",\n    fileRequired: \"True\",\n    timeLoggedDays: \"\",\n    timeLoggedHours: \"\",\n    timeLoggedMinutes: \"\",\n    supplier: \"\",\n    totalCost: \"\",\n    certificateFile: null\n  });\n\n  const [availableCertificates, setAvailableCertificates] = useState({ mandatory: [], optional: [] });\n  const [selectedProfile, setSelectedProfile] = useState(null);\n  const [suppliers, setSuppliers] = useState([]);\n\n  // Load suppliers on component mount\n  useEffect(() => {\n    fetchSuppliers();\n  }, []);\n\n  const getApiUrl = () => {\n    // In development, use localhost URL\n    if (process.env.NODE_ENV === 'development' && process.env.REACT_APP_API_URL) {\n      return process.env.REACT_APP_API_URL;\n    }\n    // In production or when API_BASE_URL is relative, use relative path\n    if (process.env.REACT_APP_API_BASE_URL?.startsWith('/')) {\n      return '';\n    }\n    // Fallback to localhost for development\n    return process.env.REACT_APP_API_URL || 'http://localhost:5003';\n  };\n\n  const fetchSuppliers = async () => {\n    try {\n      const baseUrl = getApiUrl();\n      const response = await fetch(`${baseUrl}/api/suppliers`);\n      if (response.ok) {\n        const data = await response.json();\n        setSuppliers(data);\n        console.log('Suppliers loaded:', data);\n      } else {\n        console.error('Failed to fetch suppliers:', response.status, response.statusText);\n      }\n    } catch (error) {\n      console.error('Error fetching suppliers:', error);\n    }\n  };\n\n  const handleSupplierSearch = async (searchTerm) => {\n    try {\n      const baseUrl = getApiUrl();\n      const response = await fetch(`${baseUrl}/api/suppliers/search?q=${encodeURIComponent(searchTerm)}`);\n      if (response.ok) {\n        const data = await response.json();\n        setSuppliers(data);\n      } else {\n        console.error('Failed to search suppliers:', response.status, response.statusText);\n      }\n    } catch (error) {\n      console.error('Error searching suppliers:', error);\n    }\n  };\n\n  const handleAddSupplier = async (supplierName) => {\n    try {\n      const baseUrl = getApiUrl();\n      const response = await fetch(`${baseUrl}/api/suppliers`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ name: supplierName }),\n      });\n      \n      if (response.ok) {\n        const newSupplier = await response.json();\n        console.log('New supplier added:', newSupplier);\n        // Update suppliers list\n        fetchSuppliers();\n        // Update form\n        setForm(prev => ({ ...prev, supplier: supplierName }));\n      } else {\n        console.error('Failed to add supplier:', response.status, response.statusText);\n      }\n    } catch (error) {\n      console.error('Error adding supplier:', error);\n    }\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setForm({ ...form, [name]: value });\n\n    // Handle profile selection change\n    if (name === 'profile') {\n      const profile = profiles.find(p => `${p.firstName} ${p.lastName}` === value);\n      setSelectedProfile(profile);\n      \n      if (profile && profile.jobTitle) {\n        const certificates = getCertificatesForJobRole(profile.jobTitle);\n        setAvailableCertificates(certificates);\n      } else {\n        setAvailableCertificates({ mandatory: [], optional: [] });\n      }\n      \n      // Reset certificate selection when profile changes\n      setForm(prev => ({ ...prev, certificateName: \"\" }));\n    }\n  };\n\n  const handleFileChange = (e) => {\n    const file = e.target.files[0];\n    if (file && file.type === 'application/pdf') {\n      setForm({ ...form, certificateFile: file });\n    } else {\n      alert('Please select a PDF file only.');\n      e.target.value = '';\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    \n    // Validate required fields\n    if (!form.profile) {\n      alert('Please select a profile');\n      return;\n    }\n    \n    if (!form.certificateName) {\n      alert('Please select or enter a certificate name');\n      return;\n    }\n    \n    // Transform form data to match certificate structure\n    const selectedCert = [...availableCertificates.mandatory, ...availableCertificates.optional]\n      .find(cert => cert.code === form.certificateName);\n    \n    const newCertificate = {\n      // Required fields for backend validation\n      certificate: selectedCert ? `${selectedCert.code} - ${selectedCert.description}` : form.certificateName || \"New Certificate\",\n      category: selectedCert ? selectedCert.category : \"Other\",\n      \n      // Other fields\n      description: form.description || \"\",\n      account: form.account || \"\",\n      issueDate: new Date(form.issueDate).toLocaleDateString('en-GB'),\n      expiryDate: new Date(form.expiryDate).toLocaleDateString('en-GB'),\n      profileName: form.profile || \"Unknown Profile\",\n      provider: form.supplier || \"SKILLS PROVIDER\",\n      fileRequired: form.fileRequired === \"True\" ? \"Yes\" : \"No\",\n      status: form.approvalStatus || \"Approved\",\n      cost: form.totalCost || \"0.00\",\n      jobRole: selectedProfile ? selectedProfile.jobTitle : \"Unknown\",\n      approvalStatus: form.approvalStatus || \"Approved\",\n      isInterim: form.isInterim || \"False\",\n      timeLogged: {\n        days: form.timeLoggedDays || \"0\",\n        hours: form.timeLoggedHours || \"0\",\n        minutes: form.timeLoggedMinutes || \"0\"\n      },\n      supplier: form.supplier || \"\",\n      totalCost: form.totalCost || \"0.00\",\n      certificateFile: form.certificateFile ? form.certificateFile.name : null,\n      fileData: form.certificateFile\n    };\n\n    // Add certificate to context\n    addCertificate(newCertificate);\n    \n    // Navigate to certificates page\n    navigate(\"/reporting/certificates\");\n  };\n\n  const handleCancel = () => {\n    navigate(-1); // go back one page\n    // OR navigate(\"/certificates\"); // redirect to certificate list\n  };\n\n  return (\n    <div className=\"flex\">\n      {/* Main content */}\n      <div className=\"flex-1 p-6\">\n        <h1 className=\"text-2xl font-semibold mb-6\">Create Certificate</h1>\n\n<div className=\"w-full max-w-6xl mx-auto bg-white shadow-md rounded-2xl p-6\">\n          <form onSubmit={handleSubmit} className=\"space-y-5\">\n            {/* Profile */}\n           {/* Profile Selection */}\n          <div>\n            <label className=\"block font-medium mb-1\">Profile <span className=\"text-red-500\">*</span></label>\n            <select\n              name=\"profile\"\n              value={form.profile}\n              onChange={handleChange}\n              className=\"w-full border rounded-lg p-2\"\n              required\n            >\n              <option value=\"\">Select a profile...</option>\n              {profiles.map((profile) => (\n                <option key={profile._id} value={`${profile.firstName} ${profile.lastName}`}>\n                  {profile.firstName} {profile.lastName} - {profile.jobTitle}\n                </option>\n              ))}\n            </select>\n            {selectedProfile && (\n              <p className=\"text-sm text-gray-600 mt-1\">\n                Job Role: <strong>{selectedProfile.jobTitle}</strong>\n              </p>\n            )}\n          </div>\n\n          {/* Certificate Name - Dynamic based on profile */}\n          <div>\n            <label className=\"block font-medium mb-1\">Certificate Name <span className=\"text-red-500\">*</span></label>\n            {availableCertificates.mandatory.length > 0 || availableCertificates.optional.length > 0 ? (\n              <>\n                <select\n                  name=\"certificateName\"\n                  value={form.certificateName}\n                  onChange={handleChange}\n                  className=\"w-full border rounded-lg p-2\"\n                  required\n                >\n                  <option value=\"\">Select a certificate...</option>\n                  \n                  {availableCertificates.mandatory.length > 0 && (\n                    <optgroup label=\"Mandatory Certificates\">\n                      {availableCertificates.mandatory.map((cert) => (\n                        <option key={cert.code} value={cert.code}>\n                          {cert.code} - {cert.description} ({cert.category})\n                        </option>\n                      ))}\n                    </optgroup>\n                  )}\n                  \n                  {availableCertificates.optional.length > 0 && (\n                    <optgroup label=\"Optional Certificates\">\n                      {availableCertificates.optional.map((cert) => (\n                        <option key={cert.code} value={cert.code}>\n                          {cert.code} - {cert.description}\n                        </option>\n                      ))}\n                    </optgroup>\n                  )}\n                </select>\n                \n                {/* Certificate Summary */}\n                {(availableCertificates.mandatory.length > 0 || availableCertificates.optional.length > 0) && (\n                  <div className=\"mt-2 p-3 bg-gray-50 rounded-lg\">\n                    <p className=\"text-sm font-medium text-gray-700 mb-2\">Available Certificates for {selectedProfile?.jobTitle}:</p>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs\">\n                      <div>\n                        <p className=\"font-medium text-red-600\">Mandatory ({availableCertificates.mandatory.length}):</p>\n                        <ul className=\"list-disc list-inside text-gray-600\">\n                          {availableCertificates.mandatory.slice(0, 3).map(cert => (\n                            <li key={cert.code}>{cert.code} - {cert.category}</li>\n                          ))}\n                          {availableCertificates.mandatory.length > 3 && (\n                            <li>... and {availableCertificates.mandatory.length - 3} more</li>\n                          )}\n                        </ul>\n                      </div>\n                      <div>\n                        <p className=\"font-medium text-blue-600\">Optional ({availableCertificates.optional.length}):</p>\n                        <ul className=\"list-disc list-inside text-gray-600\">\n                          {availableCertificates.optional.slice(0, 3).map(cert => (\n                            <li key={cert.code}>{cert.code}</li>\n                          ))}\n                          {availableCertificates.optional.length > 3 && (\n                            <li>... and {availableCertificates.optional.length - 3} more</li>\n                          )}\n                        </ul>\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </>\n            ) : (\n              <input\n                type=\"text\"\n                name=\"certificateName\"\n                placeholder={form.profile ? \"No certificates mapped for this job role. Enter manually.\" : \"Please select a profile first\"}\n                value={form.certificateName}\n                onChange={handleChange}\n                className=\"w-full border rounded-lg p-2\"\n                disabled={!form.profile}\n              />\n            )}\n          </div>\n            {/* Account */}\n            <div>\n              <label className=\"block font-medium mb-1\">Account</label>\n              <input\n                type=\"text\"\n                name=\"account\"\n                placeholder=\"Please select a profile above to proceed\"\n                value={form.account}\n                onChange={handleChange}\n                className=\"w-full border rounded-lg p-2\"\n              />\n            </div>\n\n            {/* Description */}\n            <div>\n              <label className=\"block font-medium mb-1\">Description</label>\n              <textarea\n                name=\"description\"\n                placeholder=\"Description (optional)\"\n                value={form.description}\n                onChange={handleChange}\n                className=\"w-full border rounded-lg p-2\"\n              />\n            </div>\n\n            {/* Dates */}\n            <div className=\"grid grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block font-medium mb-1\">Issue Date</label>\n                <input\n                  type=\"date\"\n                  name=\"issueDate\"\n                  value={form.issueDate}\n                  onChange={handleChange}\n                  className=\"w-full border rounded-lg p-2\"\n                />\n              </div>\n              <div>\n                <label className=\"block font-medium mb-1\">Expiry Date</label>\n                <input\n                  type=\"date\"\n                  name=\"expiryDate\"\n                  value={form.expiryDate}\n                  onChange={handleChange}\n                  className=\"w-full border rounded-lg p-2\"\n                />\n              </div>\n            </div>\n\n            {/* Approval Status */}\n            <div>\n              <label className=\"block font-medium mb-1\">Approval Status</label>\n              <select\n                name=\"approvalStatus\"\n                value={form.approvalStatus}\n                onChange={handleChange}\n                className=\"w-full border rounded-lg p-2\"\n              >\n                <option value=\"Approved\">Approved</option>\n                <option value=\"Pending\">Pending</option>\n                <option value=\"Rejected\">Rejected</option>\n              </select>\n            </div>\n\n            {/* Is Interim */}\n            <div>\n              <label className=\"block font-medium mb-1\">Is Interim</label>\n              <select\n                name=\"isInterim\"\n                value={form.isInterim}\n                onChange={handleChange}\n                className=\"w-full border rounded-lg p-2\"\n              >\n                <option value=\"True\">True</option>\n                <option value=\"False\">False</option>\n              </select>\n            </div>\n\n            {/* File Required */}\n            <div>\n              <label className=\"block font-medium mb-1\">File Required</label>\n              <select\n                name=\"fileRequired\"\n                value={form.fileRequired}\n                onChange={handleChange}\n                className=\"w-full border rounded-lg p-2\"\n              >\n                <option value=\"True\">True</option>\n                <option value=\"False\">False</option>\n              </select>\n            </div>\n\n            {/* Time Logged */}\n            <div>\n              <label className=\"block font-medium mb-1\">Time Logged</label>\n              <div className=\"grid grid-cols-3 gap-3\">\n                <input\n                  type=\"number\"\n                  name=\"timeLoggedDays\"\n                  placeholder=\"Days\"\n                  value={form.timeLoggedDays}\n                  onChange={handleChange}\n                  className=\"border rounded-lg p-2\"\n                />\n                <input\n                  type=\"number\"\n                  name=\"timeLoggedHours\"\n                  placeholder=\"Hours\"\n                  value={form.timeLoggedHours}\n                  onChange={handleChange}\n                  className=\"border rounded-lg p-2\"\n                />\n                <input\n                  type=\"number\"\n                  name=\"timeLoggedMinutes\"\n                  placeholder=\"Minutes\"\n                  value={form.timeLoggedMinutes}\n                  onChange={handleChange}\n                  className=\"border rounded-lg p-2\"\n                />\n              </div>\n              <p className=\"text-sm text-gray-500 mt-1\">\n                (A day is considered 8 hours)\n              </p>\n            </div>\n\n            {/* Supplier */}\n            <div>\n              <label className=\"block font-medium mb-1\">Supplier</label>\n              <SearchableDropdown\n                name=\"supplier\"\n                value={form.supplier}\n                onChange={handleChange}\n                options={suppliers}\n                placeholder=\"Type to search suppliers or add new...\"\n                onSearch={handleSupplierSearch}\n                onAddNew={handleAddSupplier}\n                className=\"w-full\"\n              />\n              <p className=\"text-xs text-gray-500 mt-1\">\n                You can type to search existing suppliers or add a new one\n              </p>\n            </div>\n\n            {/* Total Cost */}\n            <div>\n              <label className=\"block font-medium mb-1\">Total Cost</label>\n              <input\n                type=\"number\"\n                name=\"totalCost\"\n                placeholder=\"Enter total cost of the certificate\"\n                value={form.totalCost}\n                onChange={handleChange}\n                className=\"w-full border rounded-lg p-2\"\n              />\n            </div>\n\n            {/* Certificate PDF Upload */}\n            <div>\n              <label className=\"block font-medium mb-1\">Upload Certificate PDF</label>\n              <input\n                type=\"file\"\n                accept=\".pdf\"\n                onChange={handleFileChange}\n                className=\"w-full border rounded-lg p-2\"\n              />\n              {form.certificateFile && (\n                <p className=\"text-sm text-green-600 mt-1\">\n                  Selected: {form.certificateFile.name}\n                </p>\n              )}\n              <p className=\"text-xs text-gray-500 mt-1\">\n                Please upload the certificate in PDF format only\n              </p>\n            </div>\n\n            {/* Buttons */}\n            <div className=\"flex justify-end space-x-4\">\n              <button\n                type=\"button\"\n                onClick={handleCancel}\n                className=\"border px-4 py-2 rounded text-gray-600 hover:bg-gray-100\"\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                className=\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\"\n              >\n                Save changes\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}